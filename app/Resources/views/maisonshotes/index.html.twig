{% extends 'front.html.twig' %}

{% block content %}


<!-- ... end Responsive Header-BP -->
<div class="header-spacer header-spacer-small"></div>


<!-- Main Header BlogV1 -->

<div class="main-header">
    <div class="content-bg-wrap bg-account"></div>
    <div class="container">
        <div class="row">
            <div class="col col-lg-8 m-auto col-md-8 col-sm-12 col-12">
                <div class="main-header-content">
                    <h1>Liste des Maisons D'hotes</h1>
                    <p>Resever une maison d'hote</p>
                </div>
            </div>
        </div>
    </div>

    <img class="img-bottom" src="{{ asset('template/')}}img/blog_bottom.png" alt="friends">
</div>

<!-- ... end Main BlogV1 -->


<div class="container">
    <div class="row">
        <div class="col col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="ui-block responsive-flex1200">
                <div class="ui-block-title">
                    <a href="#" data-toggle="modal" data-target="#create-event" class="btn btn-primary btn-md-2">ajouter</a>

                    <form class="w-search">
                        <div class="form-group with-button">
                            Filtrer Par Pays
                            <input class="form-control js-hote-search" placeholder="Saisir Pays..." type="text">
                            {#<button>#}
                            {#<svg class="olymp-magnifying-glass-icon"><use xlink:href="{{ asset('icons/icons.svg#olymp-magnifying-glass-icon') }}"></use></svg>#}
                            {#</button>#}
                        </div>
                        <div class="inline-items" id="entitiesNav">
                            {#Recherche #}
                        </div>
                    </form>

                    <form class="w-search" method="post" action="{{ path('hotes_recherche') }}">
                        <div class="form-group with-button">
                            <input class="form-control " type="text"
                                   placeholder="Search Hote......" name="nom_hote">
                            <button>
                                <svg class="olymp-magnifying-glass-icon">
                                    <use xlink:href="{{ asset('template/') }}svg-icons/sprites/icons.svg#olymp-magnifying-glass-icon"></use>
                                </svg>
                            </button>

                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>



    <div class="container" id="blogRecherche">
    <div class="row">

        <div class="col col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12">
            {% for x in maisonsHotes %}

            <div class="ui-block">


                <!-- Post -->

                <article class="hentry blog-post blog-post-v3">

                    <div class="post-thumb">
                        <img src="{{ asset('images/' ~ x.image) }}"  width="100" height="150" alt="photo">
                        <a href="#" class="post-category bg-primary">{{ x.pays }}</a>
                    </div>

                    <div class="post-content">

                        <div class="author-date">
                            by
                            <a class="h6 post__author-name fn">{{ x.user }}</a>
                            <div class="post__date">
                                <time class="published" datetime="2017-03-24T18:18">
                                    - 12 hours ago
                                </time>
                            </div>
                        </div>

                        <a href="{{ path('maisonshotes_show' , {'id':x.id })  }}" class="h3 post-title">{{ x.nom }}!</a>
                        <p>{{ x.description }}
                        </p>

                        <div class="comments-shared">
                            <a href="#" class="post-add-icon inline-items" data-toggle="modal"  data-target="#comment" >
                                <svg class="olymp-speech-balloon-icon" >
                                    <use xlink:href="{{ asset('template/')}}svg-icons/sprites/icons.svg#olymp-speech-balloon-icon">

                                    </use></svg>
                                <span>20</span>
                            </a>
                        </div>
                    </div>

                </article>

                <!-- ... end Post -->

            </div>
{% endfor %}


            <!-- Pagination -->

            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">1<div class="ripple-container"><div class="ripple ripple-on ripple-out" style="left: -10.3833px; top: -16.8333px; background-color: rgb(255, 255, 255); transform: scale(16.7857);"></div></div></a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">...</a></li>
                    <li class="page-item"><a class="page-link" href="#">12</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                </ul>
            </nav>

            <!-- ... end Pagination -->

        </div>

        <div class="col col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12">
            <aside>

                <div class="ui-block">
                    <div class="ui-block-title">
                        <h6 class="title">Featured Posts</h6>
                    </div>
                </div>

                <div class="ui-block">


                    <!-- Post -->

                    <article class="hentry blog-post blog-post-v3 featured-post-item">

                        <div class="post-thumb">
                            <img src="{{ asset('template/')}}img/post13.jpg" alt="photo">
                            <a href="#" class="post-category bg-purple">INSPIRATION</a>
                        </div>

                        <div class="post-content">

                            <div class="author-date">
                                by
                                <a class="h6 post__author-name fn" href="#">JACK SCORPIO</a>
                                <div class="post__date">
                                    <time class="published" datetime="2017-03-24T18:18">
                                        - 5 MONTHS ago
                                    </time>
                                </div>
                            </div>

                            <a href="#" class="h4 post-title">We went lookhunting in all the California bay area</a>

                            <div class="post-additional-info inline-items">


                                <div class="names-people-likes">
                                    206
                                </div>

                                <div class="comments-shared">
                                    <a href="#" class="post-add-icon inline-items">
                                        <svg class="olymp-speech-balloon-icon">
                                            <use xlink:href="{{ asset('template/')}}svg-icons/sprites/icons.svg#olymp-speech-balloon-icon">

                                            </use></svg>
                                        <span>97</span>
                                    </a>
                                </div>

                            </div>
                        </div>

                    </article>

                    <!-- ... end Post -->

                </div>

                <div class="ui-block">


                    <!-- Post -->

                    <article class="hentry blog-post blog-post-v3 featured-post-item">

                        <div class="post-thumb">
                            <img src="{{ asset('template/')}}img/post14.jpg" alt="photo">
                            <a href="#" class="post-category bg-blue-light">THE COMMUNITY</a>
                        </div>

                        <div class="post-content">

                            <div class="author-date">
                                by
                                <a class="h6 post__author-name fn" href="#">JACK SCORPIO</a>
                                <div class="post__date">
                                    <time class="published" datetime="2017-03-24T18:18">
                                        - 2 MONTHS ago
                                    </time>
                                </div>
                            </div>

                            <a href="#" class="h4 post-title">We went lookhunting in all the California bay area</a>

                            <div class="post-additional-info inline-items">

                                <ul class="friends-harmonic">
                                    <li>
                                        <a href="#">
                                            <img src="{{ asset('template/')}}img/icon-chat6.png" alt="icon">
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <img src="{{ asset('template/')}}img/icon-chat7.png" alt="icon">
                                        </a>
                                    </li>
                                </ul>
                                <div class="names-people-likes">
                                    37
                                </div>

                            </div>
                        </div>

                    </article>

                    <!-- ... end Post -->

                </div>

                <div class="ui-block">


                    <!-- Post -->

                    <article class="hentry blog-post blog-post-v3 featured-post-item">

                        <div class="post-thumb">
                            <img src="{{ asset('template/')}}img/post15.jpg" alt="photo">
                            <a href="#" class="post-category bg-purple">INSPIRATION</a>
                        </div>

                        <div class="post-content">

                            <div class="author-date">
                                by
                                <a class="h6 post__author-name fn" href="#">MADDY SIMMONS </a>
                                <div class="post__date">
                                    <time class="published" datetime="2017-03-24T18:18">
                                        - 3 MONTHS ago
                                    </time>
                                </div>
                            </div>

                            <a href="#" class="h4 post-title">Check out this 10 yummy breakfast recipes</a>

                            <div class="post-additional-info inline-items">

                                <ul class="friends-harmonic">
                                    <li>
                                        <a href="#">
                                            <img src="{{ asset('template/')}}img/icon-chat20.png" alt="icon">
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <img src="{{ asset('template/')}}img/icon-chat11.png" alt="icon">
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <img src="{{ asset('template/')}}img/icon-chat9.png" alt="icon">
                                        </a>
                                    </li>
                                </ul>
                                <div class="names-people-likes">
                                    88
                                </div>

                                <div class="comments-shared">
                                    <a href="#" class="post-add-icon inline-items">
                                        <svg class="olymp-speech-balloon-icon"><use xlink:href="{{ asset('template/')}}svg-icons/sprites/icons.svg#olymp-speech-balloon-icon"></use></svg>
                                        <span>39</span>
                                    </a>
                                </div>

                            </div>
                        </div>

                    </article>

                    <!-- ... end Post -->
                </div>

                <div class="ui-block">


                    <!-- Post -->

                    <article class="hentry blog-post blog-post-v3 featured-post-item">

                        <div class="post-thumb">
                            <img src="{{ asset('template/')}}img/post16.jpg" alt="photo">
                            <a href="#" class="post-category bg-primary">OLYMPUS NEWS</a>
                        </div>

                        <div class="post-content">

                            <div class="author-date">
                                by
                                <a class="h6 post__author-name fn" href="#">JACK SCORPIO</a>
                                <div class="post__date">
                                    <time class="published" datetime="2017-03-24T18:18">
                                        - 6 MONTHS ago
                                    </time>
                                </div>
                            </div>

                            <a href="#" class="h4 post-title">We optimized the Olympus App for better navigation</a>


                        </div>

                    </article>

                    <!-- ... end Post -->

                </div>

            </aside>
        </div>

    </div>

</div>


<!-- Window-popup Create hotes -->

<div class="modal fade" id="create-event" tabindex="-1" role="dialog" aria-labelledby="create-event" aria-hidden="true">
    <div class="modal-dialog window-popup create-event" role="document">
        <div class="modal-content">
            <a href="#" class="close icon-close" data-dismiss="modal" aria-label="Close">
                <svg class="olymp-close-icon">
                    <use xlink:href="{{ asset('template/') }}svg-icons/sprites/icons.svg#olymp-close-icon"></use>
                </svg>
            </a>
            <div class="modal-header">
                <h6 class="title">Ajouter Maison d'hote</h6>
            </div>

            <div class="modal-body">
                {{ form_start(form) }}
                <div class="form-group label-floating">
                    {{ form_label(form.nom) }}
                    {{ form_widget(form.nom) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.site_web) }}
                    {{ form_widget(form.site_web) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.mail) }}
                    {{ form_widget(form.mail) }}
                </div>

                <div class="form-group label-floating">
                    {{ form_label(form.tel) }}
                    {{ form_widget(form.tel) }}
                </div>

                <div class="form-group label-floating">
                    {{ form_label(form.pays) }}
                    {{ form_widget(form.pays) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.gouvernorat) }}
                    {{ form_widget(form.gouvernorat) }}
                </div>

                <div class="form-group label-floating">
                    {{ form_label(form.adresse) }}
                    {{ form_widget(form.adresse) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.image) }}
                    {{ form_widget(form.image) }}
                </div>

                <div class="form-group label-floating">
                    {{ form_label(form.description) }}
                    {{ form_widget(form.description) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.capacites) }}
                    {{ form_widget(form.capacites) }}
                </div>
                <div class="form-group label-floating">
                    {{ form_label(form.prix) }}
                    {{ form_widget(form.prix) }}
                </div>

                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>

<!-- ... end Window-popup Create Event -->



<!-- Comment Form  -->

<div class="modal fade" id="comment" tabindex="-1" role="dialog" aria-labelledby="comment" aria-hidden="true">
    <div class="modal-dialog window-popup create-event" role="document">
        <div class="modal-content">
            <a href="#" class="close icon-close" data-dismiss="modal" aria-label="Close">
                <svg class="olymp-close-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-close-icon"></use></svg>
            </a>
            <div class="modal-header">
                <h6 class="title">Ajouter Commentaire</h6>
            </div>

            <div class="modal-body">
                <div class="post__author author vcard inline-items">
                    <img src="img/author-page.jpg" alt="author">

                    <div class="form-group with-icon-right ">
                        <textarea class="form-control" placeholder="" name="comment-content"></textarea>
                        <div class="add-options-message">
                            <a href="#" class="options-message" data-toggle="modal" data-target="#update-header-photo">
                                <svg class="olymp-camera-icon">
                                    <use xlink:href="svg-icons/sprites/icons.svg#olymp-camera-icon"></use>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>

                <button class="btn btn-md-2 btn-primary">Post Comment</button>
                <button class="btn btn-md-2 btn-border-think c-grey btn-transparent custom-color">Cancel</button>
            </div>
        </div>
    </div>
</div>

<!-- ... end Comment Form  -->


    <!-- Rechercher Maison d'hote par pays Ajax -->

    <script>

        $(document).ready(function () {
            var searchRequest = null;
            $(".js-hote-search").keyup(function () {
                var minlength = 1;
                var that = this;
                var value = $(this).val();
                var entitySelector = $("#entitiesNav").html('');
                if (value.length >= minlength) {
                    if (searchRequest != null)
                        searchRequest.abort();
                    searchRequest = $.ajax({
                        type: "GET",
                        url: "{{ path('hotes_pays_filter') }}",
                        data: {
                            'q': value
                        },
                        dataType: "text",
                        success: function (msg) {
                            //we need to check if the value is the same
                            if (value == $(that).val()) {
                                var result = JSON.parse(msg);
                                $.each(result, function (key, arr) {
                                    $.each(arr, function (id, value) {
                                        if (key == 'entities') {
                                            if (id != 'error') {
                                                entitySelector.append('<li><a href="/Pi-Dev-Web/web/app_dev.php/hotes/' + id + '/show">' +
                                                    ' <div class="autho"><img src="{{ asset('images/') }}' + value[3] + '" alt="avatar"></div>' +
                                                    '<div class="notification-event">' +
                                                    '<a href="/Pi-Dev-Web/web/app_dev.php/hotes/' + id + '/show">' + value[0] + ' ' +
                                                    '<a href="/Pi-Dev-Web/web/app_dev.php/hotes/' + id + '/show"> ' + value[1] + '' +
                                                    '<a href="/Pi-Dev-Web/web/app_dev.php/hotes/' + id + '/show"> ' + value[2] + '' +
                                                    '<a href="/Pi-Dev-Web/web/app_dev.php/hotes/' + id + '/show"> ' + value[4] + '' +

                                                    '</a></li>');

                                            } else {
                                                entitySelector.append('<li class="errorLi">' + value + '</li>');
                                            }
                                        }
                                    });
                                });
                            }
                        }
                    });
                }
            });
        });

    </script>
{% endblock %}
